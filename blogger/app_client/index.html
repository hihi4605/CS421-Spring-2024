<!DOCTYPE html>
<html ng-app="bloggerApp">
<head>
    <base href="/"/>
    <title>Christian Michels Website</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <script src="/lib/angular.min.js"></script>
    <script src="/lib/angular-ui-router.min.js"></script>
    
 
</head>
<body ng-controller="HomeController">
    <div class="slider-thumb"></div>
    <div ui-view></div>
    <script type="text/ng-template" id="/home.html">
        <div class="container mt-5">
            <div class="jumbotron">
                <h1 class="display-4">{{ vm.title }}</h1>
                <p class="lead">{{ vm.message }}</p>
                <hr class="my-4">
                <p>Click below to view/edit/delete blog posts</p>
                <a class="btn btn-primary btn-lg" ui-sref="blogList" role="button">View Blogs</a>
            </div>
        </div>
</script>
 </body>

  
    <!-- Blog List -->
    <body ng-controller="BlogListController">
        <script type="text/ng-template" id="/blogList.html">
            <h1>{{ vm.pageHeader.title }}</h1>
          
    <div class="container py-5">
        <h1 class="text-center mb-5">{{ vm.title }}</h1>
        <div class="row g-4">
            <div ng-repeat="blog in vm.blogs" class="col-lg-4 col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <div class="d-flex justify-content-between mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-solid fa-circle-user user-avatar"></i>
                                <div class="ms-2">
                                    <span class="user-name">{{ blog.author }}</span>
                                </div>
                            </div>
                            <div class="post-date d-flex align-items-center">
                                <i class="fas fa-solid fa-calendar-days"></i>
                                <span class="ms-1">{{ blog.createdOn | date:'mediumDate' }}</span>
                            </div>
                        </div>
                        <h4 class="card-title mt-2 mb-3">{{ blog.blogTitle }}</h4>
                        <p class="card-text flex-grow-1">{{ blog.blogText }}</p>
                        <div class="mt-auto icon-actions">
                            <a ng-show="vm.isLoggedIn() && vm.currentUser().email ===blog.authorEmail" class = "icon-link" title="Edit" ui-sref="blogEdit({blogid: blog._id})">
                                <i class="fas fa-solid fa-pen-to-square"></i>
                            <!-- <a ui-sref="blogEdit({blogid: blog._id})" class="icon-link" title="Edit" ng-show="vm.isLoggedIn()">
                                <i class="fas fa-edit"></i>
                            </a> -->
                            <a ng-show="vm.isLoggedIn() && vm.currentUser().email ===blog.authorEmail" class = "icon-link delete" title="Delete" ui-sref="blogDelete({blogid: blog._id})">
                                <i class="fas fa-solid fa-trash"></i>
                            <!-- <a ui-sref="blogDelete({blogid: blog._id})" class="icon-link delete" title="Delete" ng-show="vm.isLoggedIn()">
                                <i class="fas fa-trash-alt"></i>
                            </a> -->
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="!vm.blogs.length" class="col-12 text-center">
                <p class="mt-5">There are no posts yet. <a ui-sref="blogAdd" class="text-decoration-none">Click here</a> to add a new post.</p>
            </div>
        </div>
    </div>
        </script>
</body>

  
 
    <script src="bloggerApp.js"></script>
  
</body>
</html>
